montageDefine("669db3e","benchmark/compare-with-callbacks",{dependencies:["../q","fs"],factory:function(e){"use strict";var t=e("../q"),i=e("fs");suite("A single simple async operation",function(){bench("with an immediately-fulfilled promise",function(e){t().then(e)}),bench("with direct setImmediate usage",function(e){setImmediate(e)}),bench("with direct setTimeout(â€¦, 0)",function(e){setTimeout(e,0)})}),suite("A fs.readFile",function(){var e=t.denodeify(i.readFile);set("iterations",1e3),set("delay",1e3),bench("directly, with callbacks",function(e){i.readFile(__filename,e)}),bench("with Q.nfcall",function(e){t.nfcall(i.readFile,__filename).then(e)}),bench("with a Q.denodeify'ed version",function(t){e(__filename).then(t)}),bench("with manual usage of deferred.makeNodeResolver",function(e){var n=t.defer();i.readFile(__filename,n.makeNodeResolver()),n.promise.then(e)})}),suite("1000 operations in parallel",function(){function e(e,t){var i=0;return function(){++i===e&&t()}}var i=1e3;bench("with immediately-fulfilled promises",function(n){for(var r=e(i,n),a=0;i>a;++a)t().then(r)}),bench("with direct setImmediate usage",function(t){for(var n=e(i,t),r=0;i>r;++r)setImmediate(n)})})}});